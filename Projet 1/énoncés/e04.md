# Okanban E04

## Objectifs

ImplÃ©menter les routes suivantes :

- GET /tags
- GET /tags/:id
- POST /tags
- PATCH /tags/:id
- DELETE /tags/:id

## Tags

Se baser sur ce qui est fait pour les cartes et les listes pour faire un CRUD complet pour les tags.

Attention, deux tags ne peuvent pas avoir le mÃªme nom. On va donc devoir soit ajouter une contrainte d'unicitÃ© sur le nom des tags, soit gÃ©rer l'erreur proprement.

## Tags le retour !
On va aussi devoir gÃ©rer les associations entre les tags et les cartes. On peut imaginer deux routes :
- **PUT** `/cards/:cardId/tags/:tagId` pour ajouter un tag Ã  une carte
- **DELETE** `/cards/:cardId/tags/:tagId` pour retirer un tag d'une carte

## Bonus

On pourrait imaginer avoir besoin de rÃ©cupÃ©rer les donnÃ©es d'autres faÃ§ons, par exemple :

- RÃ©cupÃ©rer les tags d'une carte
- RÃ©cupÃ©rer les cartes d'une liste avec ses tags
- RÃ©cupÃ©rer les cartes contenant un tag en particulier

On sort du cadre d'un CRUD classique, mais on respecte quand mÃªme le principe REST.


Deux exemples pour rÃ©cupÃ©rer les cartes d'une liste :

1. Avec une route et un controller dÃ©diÃ©s, par exemple `GET /lists/:listId/cards` qui retourne toutes les cartes d'une liste donnÃ©e.


2. En modifiant card.getAll existant et en autorisant des paramÃ¨tres de requÃªte (query string), par exemple `GET /cards?list_id=1` qui retourne toutes les cartes de la liste avec l'ID 1.

```javascript
export async function getAll(req, res) {
    const listId = parseInt(req.query.list_id);
    const whereClause = listId ? { list_id: listId } : {};

    const cards = await Card.findAll({
        where: whereClause,
        include: "tags"
    });
    return res.json(cards);
}
```

## Bonus 2

Rendre l'api plus souple en permettant de choisir par exemple si un `GET lists` inclut les cartes ou pas, idem pour un `GET cards` avec les tags.

Imaginer tous les usecases possibles et les implÃ©menter ğŸ˜‰.
